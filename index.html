<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gravador de Vídeo</title>
</head>
<body>
  <video id="video" width="640" height="480" autoplay></video>
  <script>
    let mediaRecorder;
    let chunks = [];

    // Acessar a câmera
    navigator.mediaDevices.getUserMedia({ video: true })
      .then(stream => {
        const video = document.getElementById('video');
        video.srcObject = stream;

        // Iniciar a gravação automaticamente
        mediaRecorder = new MediaRecorder(stream);
        mediaRecorder.start();

        mediaRecorder.ondataavailable = event => chunks.push(event.data);

        // Pressionar "G" para parar a gravação
        document.addEventListener('keydown', function(event) {
          if (event.key === 'g' || event.key === 'G') {
            mediaRecorder.stop();
          }
        });

        mediaRecorder.onstop = () => {
          const blob = new Blob(chunks, { type: 'video/webm' });
          const videoURL = URL.createObjectURL(blob);

          // Fazer algo com o vídeo, como baixá-lo automaticamente
          const a = document.createElement('a');
          a.href = videoURL;
          a.download = 'gravacao.webm';
          document.body.appendChild(a);
          a.click();
        };
      })
      .catch(error => console.error('Erro ao acessar a câmera:', error));
  </script>
</body>
</html>
